<?xml version="1.0" encoding="UTF-8" ?>
<schema name="activities" version="1.6">
  <!-- Field types -->
  <fieldType name="string" class="solr.StrField" sortMissingLast="true" />
  <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true"/>
  <fieldType name="int" class="solr.IntPointField" positionIncrementGap="0"/>
  <fieldType name="long" class="solr.LongPointField" positionIncrementGap="0"/>
  <fieldType name="float" class="solr.FloatPointField" positionIncrementGap="0"/>
  <fieldType name="double" class="solr.DoublePointField" positionIncrementGap="0"/>
  <fieldType name="date" class="solr.DatePointField" positionIncrementGap="0"/>

  <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
    <analyzer type="query">
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
  </fieldType>

  <!-- Fields for activities -->
  <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" />
  <field name="_version_" type="long" indexed="true" stored="true"/>
  
  <!-- Activity fields -->
  <field name="title" type="text_general" indexed="true" stored="true" required="true"/>
  <field name="description" type="text_general" indexed="true" stored="true" required="false"/>
  <field name="category" type="string" indexed="true" stored="true" required="false"/>
  <field name="sport_type" type="string" indexed="true" stored="true" required="false"/>
  <field name="difficulty_level" type="string" indexed="true" stored="true" required="false"/>
  <field name="location" type="text_general" indexed="true" stored="true" required="false"/>
  <field name="city" type="string" indexed="true" stored="true" required="false"/>
  <field name="country" type="string" indexed="true" stored="true" required="false"/>
  <field name="date_created" type="date" indexed="true" stored="true" required="false"/>
  <field name="date_event" type="date" indexed="true" stored="true" required="false"/>
  <field name="max_participants" type="int" indexed="true" stored="true" required="false"/>
  <field name="current_participants" type="int" indexed="true" stored="true" required="false"/>
  <field name="price" type="float" indexed="true" stored="true" required="false"/>
  <field name="duration_minutes" type="int" indexed="true" stored="true" required="false"/>
  <field name="organizer_id" type="string" indexed="true" stored="true" required="false"/>
  <field name="organizer_name" type="text_general" indexed="true" stored="true" required="false"/>
  <field name="is_active" type="boolean" indexed="true" stored="true" required="false"/>
  <field name="tags" type="text_general" indexed="true" stored="true" multiValued="true" required="false"/>
  
  <!-- Catch-all field for search -->
  <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>

  <!-- Copy fields for better search -->
  <copyField source="title" dest="text"/>
  <copyField source="description" dest="text"/>
  <copyField source="location" dest="text"/>
  <copyField source="city" dest="text"/>
  <copyField source="organizer_name" dest="text"/>
  <copyField source="tags" dest="text"/>

  <!-- Unique key -->
  <uniqueKey>id</uniqueKey>
</schema>
